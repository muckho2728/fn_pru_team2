// Search (Relative Search)

//public async Task<List<GoldBracelet>> SearchAsync(int? year, string name)
//{
//    var query = _context.GoldBracelets.Include(c => c.Type).AsQueryable();


//    // Trường hợp AND
//    if (year.HasValue && year.Value != 0)
//    {
//        query = query.Where(c => c.ProductionYear.HasValue && c.ProductionYear.Value == year.Value);
//    }

//    if (!string.IsNullOrWhiteSpace(name))
//    {
//        var searchTerms = name.ToLower().Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
//        if (searchTerms.Any())
//        {
//            query = query.Where(c => searchTerms.Any(term => c.BraceletName.ToLower().Contains(term)));
//        }
//    }

//    // Trường Hợp OR
//    bool hasYear = year.HasValue && year.Value != 0;
//    var searchTerms = !string.IsNullOrWhiteSpace(name)
//        ? name.ToLower().Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
//        : Array.Empty<string>();
//    bool hasName = searchTerms.Any();

//    if (!hasYear && !hasName)
//    {
//        return new List<GoldBracelet>(); // Trả về rỗng nếu không có điều kiện
//    }

//    query = query.Where(c =>
//        (hasYear && c.ProductionYear.HasValue && c.ProductionYear.Value == year.Value)
//        ||
//        (hasName && searchTerms.Any(term => c.BraceletName.ToLower().Contains(term)))
//    );
//    */


//    var result = await query.ToListAsync();
//    return result ?? new List<GoldBracelet>();
//}


/* Search Time (Relative Search)

public async Task<List<GoldBracelet>> SearchAsync(string? name, DateTime? date)
{
    var query = _context.GoldBracelets.Include(c => c.Type).AsQueryable();

    
    // Trường hợp &&
    if (!string.IsNullOrWhiteSpace(name))
    {
        var searchTerms = name.ToLower().Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
        if (searchTerms.Any())
        {
            query = query.Where(c => searchTerms.Any(term => c.BraceletName.ToLower().Contains(term)));
        }
    }

    if (date.HasValue)
    {
        query = query.Where(c => c.CreatedDate.HasValue && c.CreatedDate.Value.Date == date.Value.Date);
    }


    // Trường Hợp OR
    var searchTerms = !string.IsNullOrWhiteSpace(name)
        ? name.ToLower().Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
        : Array.Empty<string>();
    bool hasName = searchTerms.Any();
    bool hasDate = date.HasValue;

    if (!hasName && !hasDate)
    {
        return new List<GoldBracelet>();
    }

    query = query.Where(c =>
        (hasName && searchTerms.Any(term => c.BraceletName.ToLower().Contains(term)))
        ||
        (hasDate && c.CreatedDate.HasValue && c.CreatedDate.Value.Date == date.Value.Date)
    );
    */